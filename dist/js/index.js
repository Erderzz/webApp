var app=angular.module("app",["ui.router"]);app.controller("ErController",["$scope","$window","$location",function(t,e,l){t.appTitle="每日一刻",t.title="首页",t.id=0,t.$on("tab_natifi",function(e,l){var o=["首页","作者","栏目","我的"];t.id=l.id,t.title=o[l.id]}),t.back=function(){e.history.back()},t.location=l,t.hidden=!1,t.$watch("location.url()",function(e,l){var o=e.toString().indexOf("detail");t.hidden=-1!=o})}]),app.directive("navs",function(){return{restrict:"EA",templateUrl:"../views/nav_tpl.html",controller:"TabbarController"}}),app.directive("tabbar",function(){return{restrict:"EA",templateUrl:"../views/tabbar_tpl.html"}}),app.controller("TabbarController",["$scope",function(t){t.changePage=function(e){t.$emit("tab_natifi",{id:e})}}]),app.config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("home",{url:"/home",views:{home:{templateUrl:"../views/home_tpl.html",controller:"HomeController"},author:{templateUrl:"../views/author_tpl.html"},content:{templateUrl:"../views/content_tpl.html"},my:{templateUrl:"../views/my_tpl.html"}}}).state("home.list",{url:"/list",templateUrl:"../views/homelist_tpl.html"}).state("home.detail",{url:"/detail/:id",template:"<details></details>",controller:"DetailController"}),e.otherwise("home/list")}]),app.controller("HomeController",["$scope","$http",function(t,e){e({url:"http://127.0.0.1/api/home.php",method:"jsonp"}).then(function(e){t.homeData=e.data}).catch(function(t){console.log(t)})}]),app.config(["$sceDelegateProvider",function(t){t.resourceUrlWhitelist(["self","http://127.0.0.1/api/**"])}]),app.directive("details",function(){return{restrict:"EA",template:'<div class="home_details"><div ui-view></div></div>',replace:!0,link:function(t,e,l){e.html(t.item.content)}}}),app.controller("DetailController",["$scope","$stateParams",function(t,e){var l=e.id;t.item=t.homeData.posts[l],console.log(t.item)}]);